<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalender Overzicht</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center mb-4">Overzicht van Activiteiten</h2>

    <div class="row">
        <div class="col-md-12">
            <!-- Calendar -->
            <div id="calendar">
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th colspan="7" class="text-center">
                            Maand: <span th:text="${currentMonth}"></span> <span th:text="${currentYear}"></span>
                        </th>
                    </tr>
                    <tr>
                        <th>Sun</th>
                        <th>Mon</th>
                        <th>Tue</th>
                        <th>Wed</th>
                        <th>Thu</th>
                        <th>Fri</th>
                        <th>Sat</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="week : ${weeks}">
                        <td th:each="day : ${week}">
                            <div class="p-2">
                                <button class="btn btn-light mb-1" type="button" data-bs-toggle="modal" data-bs-target="#addActivityModal">
                                    <span th:text="${day.dayOfMonth}"></span>
                                </button>

                                <!-- Show activities for the day -->
                                <div th:each="activity : ${activities}"
                                     th:if="${activity.starttijd != null and #temporals.format(activity.starttijd, 'yyyy-MM-dd') == #temporals.format(day.atStartOfDay(), 'yyyy-MM-dd')}">
                                    <div class="activity-info border p-1 bg-light mb-1">
                                        <strong th:text="${activity.titel}"></strong><br>
                                        <small th:text="${#temporals.format(activity.starttijd, 'HH:mm')}"></small>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Modal for Adding Activity -->
            <div class="modal fade" id="addActivityModal" tabindex="-1" aria-labelledby="addActivityModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addActivityModalLabel">Nieuwe Activiteit Toevoegen</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form th:action="@{/calendar}" method="post">
                                <div class="mb-3">
                                    <label for="titel" class="form-label">Titel</label>
                                    <input type="text" class="form-control" id="titel" name="titel" required>
                                </div>
                                <div class="mb-3">
                                    <label for="beschrijving" class="form-label">Beschrijving</label>
                                    <input type="text" class="form-control" id="beschrijving" name="beschrijving" required>
                                </div>
                                <div class="mb-3">
                                    <label for="starttijd" class="form-label">Starttijd</label>
                                    <input type="datetime-local" class="form-control" id="starttijd" name="starttijd" required>
                                </div>
                                <div class="mb-3">
                                    <label for="eindtijd" class="form-label">Eindtijd</label>
                                    <input type="datetime-local" class="form-control" id="eindtijd" name="eindtijd" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Opslaan</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
